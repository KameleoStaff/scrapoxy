<div class="header">
    <c-container fluid>
        <c-breadcrumb>
            <c-breadcrumb-item [url]="['/']">Home</c-breadcrumb-item>
            <c-breadcrumb-item>Profile</c-breadcrumb-item>
            <c-breadcrumb-item [active]="true">Update</c-breadcrumb-item>
        </c-breadcrumb>
    </c-container>
</div>

<c-container fluid class="container-main">
    <c-row>
        <c-col>
            <form cForm [formGroup]="form" (ngSubmit)="update()">
                <c-card class="card-form">
                    <c-card-header>My Profile</c-card-header>

                    <c-card-body class="loading" [ngClass]="{finished: !!user}">
                        @if (form.controls['name']; as c) {
                            <c-row>
                                <label cLabel cCol md="2" for="name">Name</label>

                                <c-col md="10">
                                    <input
                                        type="text"
                                        cFormControl
                                        id="name"
                                        formControlName="name"
                                        placeholder="Enter the Name"
                                        autocomplete="off"
                                        data-form-type="other"
                                        data-lpignore="true"
                                        [valid]="c.dirty || c.touched ? c.valid : undefined" />

                                    @if (c.dirty || c.touched) {
                                        <c-form-feedback [valid]="c.valid">
                                            @if (c.errors; as errs) {
                                                @if (errs['required']) {
                                                    <div>Name is required.</div>
                                                }
                                            }
                                        </c-form-feedback>
                                    }
                                </c-col>
                            </c-row>
                        }
                        @if (form.controls['email']; as c) {
                            <c-row>
                                <label cLabel cCol md="2" for="email">Email</label>

                                <c-col md="10">
                                    <input
                                        type="text"
                                        cFormControl
                                        id="email"
                                        formControlName="email"
                                        placeholder="Enter the email"
                                        [valid]="c.dirty || c.touched ? c.valid : undefined" />

                                    @if (c.dirty || c.touched) {
                                        <c-form-feedback [valid]="c.valid">
                                            @if (c.errors; as errs) {
                                                @if (errs['required']) {
                                                    <div>Email is required.</div>
                                                }
                                                @if (errs['email']) {
                                                    <div>Email format is incorrect.</div>
                                                }
                                            }
                                        </c-form-feedback>
                                    }
                                </c-col>
                            </c-row>
                        }
                        @if (form.controls['picture']; as c) {
                            <c-row>
                                <label cLabel cCol md="2" for="picture">Picture URL</label>

                                <c-col md="10">
                                    <input
                                        type="text"
                                        cFormControl
                                        id="picture"
                                        formControlName="picture"
                                        placeholder="Enter the picture URL"
                                        [valid]="c.dirty || c.touched ? c.valid : undefined" />

                                    @if (c.dirty || c.touched) {
                                        <c-form-feedback [valid]="c.valid">
                                            @if (c.errors; as errs) {
                                                @if (errs['required']) {
                                                    <div>Picture URL is required.</div>
                                                }
                                            }
                                        </c-form-feedback>
                                    }
                                </c-col>
                            </c-row>
                        }
                    </c-card-body>

                    <c-card-footer>
                        <button
                            cButton
                            color="primary"
                            type="submit"
                            [loading]="processing"
                            [disabled]="!form.valid || form.pristine">
                            Update
                        </button>
                    </c-card-footer>
                </c-card>
            </form>
        </c-col>
    </c-row>
</c-container>
